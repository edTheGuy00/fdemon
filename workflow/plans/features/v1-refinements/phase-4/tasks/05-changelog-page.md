## Task: Add Changelog Page to Website

**Objective**: Add a new `/docs/changelog` route to the website that displays release history with version numbers, dates, and categorized changes — matching the changelog data generated by git-cliff.

**Depends on**: 04-changelog-setup (defines the changelog format and CHANGELOG.md structure)

### Scope

- `website/src/data.rs` — Add `ChangelogEntry` struct and `changelog_entries()` function
- `website/src/pages/docs/changelog.rs` — **NEW** Changelog page component
- `website/src/pages/docs/mod.rs` — Register the new module and add sidebar entry
- `website/src/lib.rs` — Add route for `/docs/changelog`
- `website/src/components/icons.rs` — Add a `History` or `Clock` icon (if needed for sidebar)

### Details

#### 1. Add changelog data types to `data.rs`

Define structured types for changelog entries:

```rust
pub struct ChangelogChange {
    pub description: &'static str,
    pub scope: Option<&'static str>,  // e.g., "tui", "daemon", "core"
}

pub struct ChangelogGroup {
    pub group: &'static str,          // e.g., "Features", "Bug Fixes"
    pub changes: Vec<ChangelogChange>,
}

pub struct ChangelogEntry {
    pub version: &'static str,        // e.g., "0.1.0"
    pub date: &'static str,           // e.g., "2026-02-20"
    pub groups: Vec<ChangelogGroup>,
}

pub fn changelog_entries() -> Vec<ChangelogEntry> {
    vec![
        ChangelogEntry {
            version: "0.1.0",
            date: "2026-02-20",
            groups: vec![
                ChangelogGroup {
                    group: "Features",
                    changes: vec![
                        // Populate from the generated CHANGELOG.md
                    ],
                },
                // ... more groups
            ],
        },
    ]
}
```

Populate the initial entries from the `CHANGELOG.md` generated in task 04. This is static data that will be updated each time a new release is prepared.

#### 2. Create `changelog.rs` page component

Create `website/src/pages/docs/changelog.rs`:

**Page structure:**

- Title: "Changelog"
- Subtitle: "All notable changes to Flutter Demon are documented here."
- For each `ChangelogEntry`:
  - Version header: `## v{version} — {date}` styled as a section heading
  - Version badge (blue, similar to home page badge style)
  - For each `ChangelogGroup` within the entry:
    - Group header: `### {group}` (e.g., "Features", "Bug Fixes")
    - Bulleted list of changes, with optional scope in parentheses
  - Visual separator between versions

**Design notes:**
- Use the same section styling as other doc pages (blue indicator bar + bold title)
- Version headers should be visually prominent (larger text, version badge)
- Group headers (Features, Bug Fixes, etc.) can use color coding:
  - Features → green badge/text
  - Bug Fixes → red badge/text
  - Documentation → blue badge/text
  - Performance → yellow badge/text
  - Refactoring → purple badge/text
  - Other → gray badge/text
- Each change is a bullet point in a list
- Scope (if present) shown as a dimmed prefix: `*(scope)* description`

**Component structure:**
```rust
#[component]
pub fn Changelog() -> impl IntoView {
    let entries = changelog_entries();

    view! {
        <div class="animate-fade-in space-y-8">
            <h1 class="text-3xl font-bold text-white">"Changelog"</h1>
            <p class="text-slate-400">
                "All notable changes to Flutter Demon are documented here. \
                 This project follows semantic versioning."
            </p>

            {entries.into_iter().map(|entry| {
                view! { <VersionEntry entry=entry /> }
            }).collect_view()}
        </div>
    }
}
```

#### 3. Register in `docs/mod.rs`

Add `pub mod changelog;` to the module declarations.

Add a sidebar entry to `doc_items()`:
```rust
DocItem {
    href: "/docs/changelog",
    label: "Changelog",
    icon: || view! { <History class="w-4 h-4 mr-3" /> }.into_any(),
},
```

Place it as the **last** item in the sidebar (after Architecture), since it's reference material.

#### 4. Add route in `lib.rs`

Add the import:
```rust
use pages::docs::changelog::Changelog;
```

Add the route inside the `ParentRoute`:
```rust
<Route path=path!("/changelog") view=Changelog />
```

#### 5. Add icon (if needed)

If no suitable icon exists in `components/icons.rs`, add a `History` (clock with arrow) or `ScrollText` icon from the Lucide icon set using the `lucide_icon!` macro.

Candidate icon — `ScrollText` (matches "changelog" semantics):
```rust
lucide_icon!(ScrollText,
    <path d="M15 12h-5" />
    <path d="M15 8h-5" />
    <path d="M19 17V5a2 2 0 0 0-2-2H4" />
    <path d="M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 0 0 2 2Z" />
    <path d="M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3" />
);
```

Or `History`:
```rust
lucide_icon!(History,
    <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
    <path d="M3 3v5h5" />
    <path d="M12 7v5l4 2" />
);
```

### Acceptance Criteria

1. `/docs/changelog` route exists and renders the changelog page
2. The page displays version entries with dates and categorized changes
3. A sidebar entry "Changelog" appears (last position, after Architecture)
4. Change categories are visually distinct (color-coded group headers)
5. At least the initial release (0.1.0) has populated entries from the git history
6. The page uses consistent styling with other doc pages
7. Website compiles: `cd website && trunk build`
8. Navigation to/from the changelog page works correctly

### Testing

- Visual verification: `cd website && trunk serve` then navigate to `/docs/changelog`
- Verify sidebar link highlights correctly when active
- Verify the page renders with proper formatting and no layout issues
- Verify mobile responsive behavior (sidebar drawer, content layout)

### Notes

- The changelog data is static Rust code, not dynamically fetched. When a new version is released, the `changelog_entries()` function in `data.rs` must be updated manually (or via a build script in the future).
- Future enhancement: a `build.rs` script could parse `CHANGELOG.md` and auto-generate the Rust data at compile time. This is deferred for now.
- Keep the initial implementation simple — just structured data rendered as HTML. No need for markdown parsing.
- Consider how this will scale: as releases accumulate, the page will grow. For now this is fine, but eventually a "show older" pattern or year grouping could be added.

---

## Completion Summary

**Status:** Done

### Files Modified

| File | Changes |
|------|---------|
| `website/src/components/icons.rs` | Added `ScrollText` lucide icon |
| `website/src/data.rs` | Added `ChangelogChange`, `ChangelogGroup`, `ChangelogEntry` structs and `changelog_entries()` function populated from CHANGELOG.md highlights |
| `website/src/pages/docs/changelog.rs` | NEW — `Changelog` page component with `VersionEntry` and `GroupSection` sub-components, color-coded group badges |
| `website/src/pages/docs/mod.rs` | Added `pub mod changelog;`, imported `ScrollText`, added "Changelog" sidebar entry (last position) |
| `website/src/lib.rs` | Imported `Changelog`, added `<Route path=path!("/changelog") view=Changelog />` inside docs ParentRoute |

### Notable Decisions/Tradeoffs

1. **Static data from CHANGELOG.md**: Populated `changelog_entries()` with representative highlights from each group (Features, Bug Fixes, Refactoring, Documentation) rather than every commit, keeping the page readable. The CHANGELOG.md entries are very numerous commit messages, so key milestones were selected.
2. **`group_colors()` helper**: Returns `(badge_class, label_class)` tuple matching group name to Tailwind color scheme (green=Features, red=Bug Fixes, blue=Documentation, purple=Refactoring, cyan=Testing, yellow=Performance, gray=others). This matches the design spec exactly.
3. **Version card layout**: Each version entry is wrapped in a `border border-slate-800 rounded-xl` card with a blue indicator bar, matching the Section helper pattern from other doc pages without duplicating it.
4. **`ScrollText` icon**: Used the `ScrollText` Lucide icon (scroll with text lines) as suggested in the task — semantically fits "changelog" well.

### Testing Performed

- `cd website && trunk build` — Passed (3.05s, `✅ success`)

### Risks/Limitations

1. **Static data**: The `changelog_entries()` function must be manually updated for each new release. A future `build.rs` script could automate this from CHANGELOG.md.
2. **Selective entries**: Not every commit from CHANGELOG.md was transcribed — only representative highlights per group. All groups from the CHANGELOG (Features, Bug Fixes, Refactoring, Documentation) are represented.
